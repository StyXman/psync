psync is a tool for maintaining mirrors for several types of repos.
right now the status is beta, which means that it works, it  has important
things like, configurability and CL options, but is not considered final.

it depends in the following packages (debian only):
* curl.
* python-apt.

if you want to use if you:
0) install it in the root of the mirrors.
1) modify the `psync.config.py' file.
2) ./psync/py --help.
3) fire at will.

I guess that's all. enjoy.

TODO:
* Release's
* [06:35] <cholo> StyXman: y los udebs para netinst???
* checksum support?
* summary.

[05:27] <cholo> define tmp='.'
[05:27] <cholo> o sea que hay que correrlo desde el directorio donde esta el mirror
[05:27] <StyXman> yah
[05:27] <StyXman> eso es otra limitación

[05:25] <cholo> no termino de entender cómo anda con cont=True (anda?)
[05:25] <StyXman> cholo: en vez de bajar un Packages nuevo, trata de usar uno anterior
[05:26] <StyXman> aunque no es muy inteligente con eso aún
[05:26] <StyXman> en realdad toma el Packages ya movido al lugar que le corresponde
[05:26] <StyXman> pero si lo tenés en un tmp* no se dá cuenta

Discusión sobre cómo debería funcionar el -c.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
El mecanismo de download es el siguiente:

1. se crea un directorio temporario.
2. por cada módulo:
  2.1. se bajan las bases de datos ahí.
  2.2. a partir de éstas, se bajan los paquetes en el directorio final. si se usa -s,
    los paquetes viejos encontrados son borrados al mismo tiempo; sino, son
    mantenidos hasta que se termina de descargar el módulo.
  2.3. se borran las bases actuales y se las reemplaza por las recién bajadas.

    En principio, -c debería continuar el download anterior. Qué significa esto?
Eso depende de la situación. Cuáles son? Las que se me ocurren son las
siguientes:

1. no hay una base en el dir temporario. esto puede significar dos cosas: el
  módulo está completo, o jamás se inició. esto se puede desambiguar poniendo
  dos timestamps, uno al comienzo y otro al finalizar el módulo. si no se
  terminó, el caso es el mismo que en 2.

2. no se terminó de bajar las bases de datos. por ahora no tenemos soporte de
  detección de edades de los archivos en upstream, asi que la solución es borrar
  el temporario y bajar una nueva.

3. la base temporaria terminó, y estamos a la mitad del update. primero, cómo
  detectar si la base no está cortada? solución: bajarla con otro nombre en 2.1
  y cambiar el nombre entre 2.1 y 2.2. ya tenendo la base completa, se procesan
  los paquetes, teniendo en cuenta -s.

4. terminó el módulo, pero no borró los archivos. no importa (por ahora); serán
  borrados en el próximo sweep.

5. terminó el módulo, pero los otros no fueron procesados. la situación es la
  misma que en el punto 1. se resuelve ahí.
